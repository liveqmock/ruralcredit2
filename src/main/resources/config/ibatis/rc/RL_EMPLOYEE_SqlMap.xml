<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="RL_EMPLOYEE">
	<typeAlias alias="EmployeeClass" type="com.creditease.rc.domain.Employee" />
  <resultMap class="com.creditease.rc.domain.Employee" id="abatorgenerated_EmployeeResult">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <result column="EMPLOYEE_ID" jdbcType="DECIMAL" property="employeeId" />
    <result column="COMEMPNO" jdbcType="VARCHAR" property="comempno" />
    <result column="COMEMPID" jdbcType="INTEGER" property="comEmpId" />
    <result column="ACCOUNT" jdbcType="VARCHAR" property="account" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="ACTIVESTATUS" jdbcType="CHAR" property="activestatus" />
    <result column="ISACTIVE" jdbcType="CHAR" property="isactive" />
    <result column="ROLENAME" jdbcType="VARCHAR" property="rolename" />
    <result column="ROLEDESC" jdbcType="VARCHAR" property="roledesc" />
    <result column="DEPARTMENTNAME" jdbcType="VARCHAR" property="departmentname" />
    <result column="DEPARTMENTID" jdbcType="VARCHAR" property="departmentid" />
    <result column="AREADEPARTMENTNAME" jdbcType="VARCHAR" property="areadepartmentname" />
    <result column="AREADEPARTMENTID" jdbcType="VARCHAR" property="areadepartmentid" />
    <result column="CITYDEPARTMENTNAME" jdbcType="VARCHAR" property="citydepartmentname" />
    <result column="CITYDEPARTMENTID" jdbcType="VARCHAR" property="citydepartmentid" />
    <result column="OPENAUTHORITYDATE" jdbcType="TIMESTAMP" property="openauthoritydate" />
    <result column="CLOSEAUTHORITYDATE" jdbcType="TIMESTAMP" property="closeauthoritydate" />
    <result column="ENTRYTIME" jdbcType="TIMESTAMP" property="entrytime" />
    <result column="EMAILADDR" jdbcType="VARCHAR" property="emailaddr" />
  </resultMap>
  
  <!-- emp.employee_id    employeeId,
  	   emp.name 			  name,
       emp.comempid           comEmpId,
       emp.areadepartmentid   areaDepartmentId,
       emp.areadepartmentname areaDepartmentName,
       emp.openauthoritydate  openauthoritydate -->
  
  <resultMap class="com.creditease.rc.vo.EmployeeVo" id="employeeResultMap">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <result column="COMEMPID" jdbcType="INTEGER" property="comEmpId" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="AREADEPARTMENTNAME" jdbcType="VARCHAR" property="areaDepartmentName" />
    <result column="AREADEPARTMENTID" jdbcType="VARCHAR" property="areaDepartmentId" />
    <result column="OPENAUTHORITYDATE" jdbcType="TIMESTAMP" property="openauthoritydate" />
    <result column="MANAGERSALESPLANNINGID" jdbcType="INTEGER" property="managerSalesPlanningId" />
    <result column="OPERATORID" jdbcType="INTEGER" property="operatorId" />
    <result column="CREDITDATE" jdbcType="TIMESTAMP" property="creditDate" />
    <result column="JAN" property="jan" jdbcType="DECIMAL" />
    <result column="FEB" property="feb" jdbcType="DECIMAL" />
    <result column="MAR" property="mar" jdbcType="DECIMAL" />
    <result column="APR" property="apr" jdbcType="DECIMAL" />
    <result column="MAY" property="may" jdbcType="DECIMAL" />
    <result column="JUN" property="jun" jdbcType="DECIMAL" />
    <result column="JUL" property="jul" jdbcType="DECIMAL" />
    <result column="AUG" property="aug" jdbcType="DECIMAL" />
    <result column="SEP" property="sep" jdbcType="DECIMAL" />
    <result column="OCT" property="oct" jdbcType="DECIMAL" />
    <result column="NOV" property="nov" jdbcType="DECIMAL" />
    <result column="DEC" property="dec" jdbcType="DECIMAL" />
    
  </resultMap>
  
  <!-- 根据员工id号更新 -->
  <update id="updatebyComempno" parameterClass="com.creditease.rc.domain.Employee">
  	 update rl_employee e set e.isactive='2',e.activestatus='4',e.closeauthoritydate=#closeauthoritydate# 
  	 where e.comempid=#comEmpId#
  </update>
  
  <!-- 根据员工编号删除该员工 -->
  <delete id="deleteByComempno" parameterClass="string">
  	delete rl_employee e where e.comempno=#comempno#
  </delete>
  <!-- 根据员工编号更新 -->
  <update id="updateEmployee" parameterClass="com.creditease.rc.domain.Employee">
  	update rl_employee e
  	<dynamic prepend="set" >
  		<isNotNull prepend="," property="employeeId" >
  		e.EMPLOYEE_ID = #employeeId:VARCHAR#
	  	</isNotNull>
  		<isNotNull prepend="," property="comempno" >
  		e.COMEMPNO = #comempno:VARCHAR#
	  	</isNotNull>
  		<isNotNull prepend="," property="account" >
  		e.ACCOUNT = #account:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="name" >
  		e.NAME = #name:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="activestatus" >
  		e.ACTIVESTATUS = #activestatus:CHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="isactive" >
  		e.ISACTIVE = #isactive:CHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="rolename" >
  		e.ROLENAME = #rolename:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="roledesc" >
  		e.ROLEDESC = #roledesc:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="departmentname" >
  		e.DEPARTMENTNAME = #departmentname:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="departmentid" >
  		e.DEPARTMENTID = #departmentid:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="areadepartmentname" >
  		e.AREADEPARTMENTNAME = #areadepartmentname:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="areadepartmentid" >
  		e.AREADEPARTMENTID = #areadepartmentid:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="citydepartmentname" >
  		e.CITYDEPARTMENTNAME = #citydepartmentname:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="citydepartmentid" >
  		e.CITYDEPARTMENTID = #citydepartmentid:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="openauthoritydate" >
  		e.OPENAUTHORITYDATE = #openauthoritydate:TIMESTAMP#
	  	</isNotNull>
	  	<isNotNull prepend="," property="closeauthoritydate" >
  		e.CLOSEAUTHORITYDATE = #closeauthoritydate:TIMESTAMP#
	  	</isNotNull>
	  	<isNotNull prepend="," property="entrytime" >
  		e.ENTRYTIME = #entrytime:TIMESTAMP#
	  	</isNotNull>
	  	<isNotNull prepend="," property="emailaddr" >
  		e.EMAILADDR = #emailaddr:VARCHAR#
	  	</isNotNull>
	  	<isNotNull prepend="," property="comEmpId" >
  		e.COMEMPID = #comEmpId:INTEGER#
	  	</isNotNull>
  	</dynamic>
  		where e.COMEMPID = #comEmpId:INTEGER#
  </update>
  
  <!-- 查询插入的主键id -->
  <select id="selectEmployeeId" resultClass="int">
  	select e.employee_id  from rl_employee e 
  </select>
  
  <!-- 查询所有信息 -->
  <select id="selectEmployeeList" resultClass="com.creditease.rc.domain.Employee">
  	select * from rl_employee
  </select>
  
  <sql id="employeeList">
  	select distinct e.employee_id as employeeId,
  			e.COMEMPID as comEmpId,
  			e.comempno as comempno,
  			e.name as name,
  			e.account as account,
  			e.citydepartmentname as citydepartmentname,
  			e.citydepartmentid as citydepartmentid,
  			e.areadepartmentname as areadepartmentname,
  			e.areadepartmentid as areadepartmentid,
  			e.departmentname as departmentname,
       		e.departmentid as departmentid,
       		e.rolename as rolename,
       		e.roledesc as roledesc,
       		e.entrytime as entrytime,
       		e.openauthoritydate as openauthoritydate,
       		e.closeauthoritydate as closeauthoritydate,
       		e.emailaddr as emailaddr,
       (select rc.code_value from rl_codetable rc where rc.section='isActive' and e.isactive=rc.code_key ) as isactive,
       (select rc.code_value from rl_codetable rc where rc.section='activeStatus' and e.activestatus=rc.code_key ) as activestatus 
  	
  	from rl_employee e
	<dynamic prepend="where">
		<isNotEmpty prepend="AND"  property="authority">
			(e.AREADEPARTMENTID in ($authority$) or e.DEPARTMENTID in ($authority$) or e.CITYDEPARTMENTID in ($authority$))
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="employee.areadepartmentid">
			e.AREADEPARTMENTID=#employee.areadepartmentid#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="employee.account">
			e.account like '%$employee.account$%'
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="employee.name">
			e.name like '%$employee.name$%'
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="employee.isactive">
			e.isactive = #employee.isactive#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="employee.comempno">
			e.comempno = #employee.comempno#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="employee.roledesc">
			e.roledesc like '%$employee.roledesc$%'
		</isNotEmpty>
	</dynamic>
	order by e.OPENAUTHORITYDATE desc
  </sql>
  <!-- 员工列表 -->
  <select id="selectAll" parameterClass="java.util.Map" resultClass="EmployeeClass">
  	
	<include refid="employeeList"/>
	
  </select>
  
  <select id="selectAllCount" parameterClass="java.util.HashMap" resultClass="int">
  	select count(*) from (<include refid="employeeList"/>)
  </select>
  
  <select id="abatorgenerated_selectByPrimaryKey" parameterClass="com.creditease.rc.domain.Employee" resultMap="abatorgenerated_EmployeeResult">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    select EMPLOYEE_ID,COMEMPID, COMEMPNO, ACCOUNT, NAME, ACTIVESTATUS, ISACTIVE, ROLENAME, ROLEDESC,
      DEPARTMENTNAME, DEPARTMENTID, AREADEPARTMENTNAME, AREADEPARTMENTID, CITYDEPARTMENTNAME,
      CITYDEPARTMENTID, OPENAUTHORITYDATE, CLOSEAUTHORITYDATE, ENTRYTIME, EMAILADDR
    from RL_EMPLOYEE
    where EMPLOYEE_ID = #employeeId:DECIMAL#
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.creditease.rc.domain.Employee">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    delete from RL_EMPLOYEE
    where EMPLOYEE_ID = #employeeId:DECIMAL#
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.creditease.rc.domain.Employee">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <selectKey keyProperty="employeeId" resultClass="java.lang.Long">
      select SEQ_BASIC_INFO.NEXTVAL  from dual
    </selectKey>
    insert into RL_EMPLOYEE (EMPLOYEE_ID,COMEMPNO,COMEMPID, ACCOUNT, NAME, ACTIVESTATUS, ISACTIVE, ROLENAME, ROLEDESC,
      DEPARTMENTNAME, DEPARTMENTID, AREADEPARTMENTNAME, AREADEPARTMENTID, CITYDEPARTMENTNAME,
      CITYDEPARTMENTID, OPENAUTHORITYDATE, CLOSEAUTHORITYDATE, ENTRYTIME, EMAILADDR)
    values (#employeeId:DECIMAL#,#comempno:VARCHAR#,#comEmpId:INTEGER#, #account:VARCHAR#, #name:VARCHAR#, #activestatus:CHAR#,
      #isactive:CHAR#, #rolename:VARCHAR#, #roledesc:VARCHAR#, #departmentname:VARCHAR#,
      #departmentid:VARCHAR#, #areadepartmentname:VARCHAR#, #areadepartmentid:VARCHAR#,
      #citydepartmentname:VARCHAR#, #citydepartmentid:VARCHAR#, #openauthoritydate:TIMESTAMP#,
      #closeauthoritydate:TIMESTAMP#, #entrytime:TIMESTAMP#, #emailaddr:VARCHAR#)
    
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.creditease.rc.domain.Employee">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    update RL_EMPLOYEE
    set COMEMPNO = #comempno:VARCHAR#,
    e.COMEMPID = #comEmpId:INTEGER#,
      ACCOUNT = #account:VARCHAR#,
      NAME = #name:VARCHAR#,
      ACTIVESTATUS = #activestatus:CHAR#,
      ISACTIVE = #isactive:CHAR#,
      ROLENAME = #rolename:VARCHAR#,
      ROLEDESC = #roledesc:VARCHAR#,
      DEPARTMENTNAME = #departmentname:VARCHAR#,
      DEPARTMENTID = #departmentid:VARCHAR#,
      AREADEPARTMENTNAME = #areadepartmentname:VARCHAR#,
      AREADEPARTMENTID = #areadepartmentid:VARCHAR#,
      CITYDEPARTMENTNAME = #citydepartmentname:VARCHAR#,
      CITYDEPARTMENTID = #citydepartmentid:VARCHAR#,
      OPENAUTHORITYDATE = #openauthoritydate:TIMESTAMP#,
      CLOSEAUTHORITYDATE = #closeauthoritydate:TIMESTAMP#,
      ENTRYTIME = #entrytime:TIMESTAMP#,
      EMAILADDR = #emailaddr:VARCHAR#
    where EMPLOYEE_ID = #employeeId:DECIMAL#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.creditease.rc.domain.Employee">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    update RL_EMPLOYEE
    <dynamic prepend="set">
    	<isNotNull prepend="," property="employeeId">
        EMPLOYEE_ID = #employeeId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="comempno">
        COMEMPNO = #comempno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="comEmpId" >
  		e.COMEMPID = #comEmpId:INTEGER#
	  	</isNotNull>
      <isNotNull prepend="," property="account">
        ACCOUNT = #account:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name">
        NAME = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="activestatus">
        ACTIVESTATUS = #activestatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="isactive">
        ISACTIVE = #isactive:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="rolename">
        ROLENAME = #rolename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="roledesc">
        ROLEDESC = #roledesc:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="departmentname">
        DEPARTMENTNAME = #departmentname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="departmentid">
        DEPARTMENTID = #departmentid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="areadepartmentname">
        AREADEPARTMENTNAME = #areadepartmentname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="areadepartmentid">
        AREADEPARTMENTID = #areadepartmentid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="citydepartmentname">
        CITYDEPARTMENTNAME = #citydepartmentname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="citydepartmentid">
        CITYDEPARTMENTID = #citydepartmentid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="openauthoritydate">
        OPENAUTHORITYDATE = #openauthoritydate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="closeauthoritydate">
        CLOSEAUTHORITYDATE = #closeauthoritydate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="entrytime">
        ENTRYTIME = #entrytime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="emailaddr">
        EMAILADDR = #emailaddr:VARCHAR#
      </isNotNull>
    </dynamic>
    where EMPLOYEE_ID = #employeeId:DECIMAL#
  </update>
  <!-- 查询信贷员的放款量信息 -->
  <sql id="selectManagerSalesPlanningList">
  select 
       man.manager_sales_planning_id 	managerSalesPlanningId,
       emp.name         				name,
       emp.comempid           			comEmpId,
       emp.areadepartmentid   			areaDepartmentId,
       emp.areadepartmentname 			areaDepartmentName,
       emp.openauthoritydate  openauthoritydate,
       man.CREDIT_DATE	      creditDate,
       man.operator_id        operatorId,
       man.jan                jan,
       man.feb                feb,
       man.mar                mar,
       man.apr                apr,
       man.may                may,
       man.jun                jun,
       man.jul                jul,
       man.aug                aug,
       man.sep                sep,
       man.oct                oct,
       man.nov                nov,
       man.dec                dec
       from rl_employee emp left join rl_manager_sales_planning man 
       on man.comempid=emp.comempid
       <isNotEmpty property="year" prepend="and">
			man.year=#year#
		</isNotEmpty>
		and (man.type is null or (man.type = '0'))
       where emp.Activestatus != '4'
       and emp.isactive != '2'
       and emp.rolename like '%ROLE_LOAN_OFFICER%'
       
       <isNotEmpty prepend="AND"  property="authority">
			(emp.AREADEPARTMENTID in ($authority$) or emp.DEPARTMENTID in ($authority$) or emp.CITYDEPARTMENTID  in ($authority$))
		</isNotEmpty>
		<isNotEmpty property="areaDepartmentId" prepend="and">
			emp.areadepartmentid in ($areaDepartmentId$)
		</isNotEmpty>
		order by emp.areadepartmentid desc,man.manager_sales_planning_id asc, man.credit_date desc,emp.openauthoritydate desc
  </sql>
  <!--员工列表中信贷员的信息 -->
  <select id="selectManagerSalesPlanningLoanSum" parameterClass="java.util.Map" resultMap="employeeResultMap">
  	
	<include refid="selectManagerSalesPlanningList"/>
	
  </select>
  
  <select id="selectManagerSalesPlanningAllCount" parameterClass="java.util.HashMap" resultClass="int">
  	select count(*) from (<include refid="selectManagerSalesPlanningList"/>)
  </select>
  
   <!-- 查询信贷员的放款量信息222 -->
  <sql id="selectManagerSalesPlanningList2">
  select 
       man.manager_sales_planning_id 	managerSalesPlanningId,
       emp.name         				name,
       emp.comempid           			comEmpId,
       emp.areadepartmentid   			areaDepartmentId,
       emp.areadepartmentname 			areaDepartmentName,
       emp.openauthoritydate  openauthoritydate,
       man.CREDIT_DATE	      creditDate,
       man.operator_id        operatorId,
       man.jan                jan,
       man.feb                feb,
       man.mar                mar,
       man.apr                apr,
       man.may                may,
       man.jun                jun,
       man.jul                jul,
       man.aug                aug,
       man.sep                sep,
       man.oct                oct,
       man.nov                nov,
       man.dec                dec
       from rl_employee emp left join rl_manager_sales_planning man 
       on man.comempid=emp.comempid
       <isNotEmpty property="year" prepend="and">
			man.year=#year#
		</isNotEmpty>
		and man.type='0'
       where emp.Activestatus != '4'
       and emp.isactive != '2'
       and emp.rolename like '%ROLE_LOAN_OFFICER%'
       <!-- and (man.type is null or (man.type = '0')) -->
       <isNotEmpty prepend="AND"  property="authority">
			(emp.AREADEPARTMENTID in ($authority$) or emp.DEPARTMENTID in ($authority$) or emp.CITYDEPARTMENTID  in ($authority$))
		</isNotEmpty>
		<isNotEmpty property="areaDepartmentId" prepend="and">
			emp.areaDepartmentId in ($areaDepartmentId$)
		</isNotEmpty>
		order by emp.areadepartmentid desc,man.manager_sales_planning_id asc, man.credit_date desc,emp.openauthoritydate desc
  </sql>
  <!--员工列表中信贷员的信息 -->
  <select id="selectManagerSalesPlanningLoanSum2" parameterClass="java.util.Map" resultMap="employeeResultMap">
  	
	<include refid="selectManagerSalesPlanningList2"/>
	
  </select>
  
  <select id="selectManagerSalesPlanningAllCount2" parameterClass="java.util.HashMap" resultClass="int">
  	select count(*) from (<include refid="selectManagerSalesPlanningList2"/>)
  </select>
  
  
  
  
  <!-- 查询放款合同金额  begin-->
  <sql id="selectManagerSalesPlanningContractList">
 select 
       man.manager_sales_planning_id 	managerSalesPlanningId,
       emp.name         				name,
       emp.comempid           			comEmpId,
       emp.areadepartmentid   			areaDepartmentId,
       emp.areadepartmentname 			areaDepartmentName,
       emp.openauthoritydate  openauthoritydate,
       man.CREDIT_DATE	      creditDate,
       man.operator_id        operatorId,
       man.jan                jan,
       man.feb                feb,
       man.mar                mar,
       man.apr                apr,
       man.may                may,
       man.jun                jun,
       man.jul                jul,
       man.aug                aug,
       man.sep                sep,
       man.oct                oct,
       man.nov                nov,
       man.dec                dec
       from rl_employee emp left join rl_manager_sales_planning man 
       on man.comempid=emp.comempid
       <isNotEmpty property="year" prepend="and">
			man.year=#year#
		</isNotEmpty>
		 and (man.type is null or (man.type = '1')) 
       where emp.Activestatus != '4'
       and emp.isactive != '2'
       and emp.rolename like '%ROLE_LOAN_OFFICER%'
       <isNotEmpty prepend="AND"  property="authority">
			(emp.AREADEPARTMENTID in ($authority$) or emp.DEPARTMENTID in ($authority$) or emp.CITYDEPARTMENTID  in ($authority$))
		</isNotEmpty>
		<isNotEmpty property="areaDepartmentId" prepend="and">
			emp.AREADEPARTMENTID in ($areaDepartmentId$)
		</isNotEmpty>
		order by emp.areadepartmentid desc,man.manager_sales_planning_id asc, man.credit_date desc,emp.openauthoritydate desc
  </sql>
  <!--员工列表中信贷员的信息 -->
  <select id="selectManagerSalesPlanningContractMoney" parameterClass="java.util.Map" resultMap="employeeResultMap">
  	
	<include refid="selectManagerSalesPlanningContractList"/>
	
  </select>
  <select id="selectManagerSalesPlanningContractListCount" parameterClass="java.util.HashMap" resultClass="int">
  	select count(*) from (<include refid="selectManagerSalesPlanningContractList"/>)
  </select>
  <!-- end --> 
  
  <!-- 合同金额销售计划2222222 begin -->
  <sql id="selectManagerSalesPlanningContractList2">
  select 
       man.manager_sales_planning_id 	managerSalesPlanningId,
       emp.name         				name,
       emp.comempid           			comEmpId,
       emp.areadepartmentid   			areaDepartmentId,
       emp.areadepartmentname 			areaDepartmentName,
       emp.openauthoritydate  openauthoritydate,
       man.CREDIT_DATE	      creditDate,
       man.operator_id        operatorId,
       man.jan                jan,
       man.feb                feb,
       man.mar                mar,
       man.apr                apr,
       man.may                may,
       man.jun                jun,
       man.jul                jul,
       man.aug                aug,
       man.sep                sep,
       man.oct                oct,
       man.nov                nov,
       man.dec                dec
       from rl_employee emp left join rl_manager_sales_planning man 
       on man.comempid=emp.comempid
       <isNotEmpty property="year" prepend="and">
			man.year=#year#
		</isNotEmpty>
		and man.type='1'
       where emp.Activestatus != '4'
       and emp.isactive != '2'
       and emp.rolename like '%ROLE_LOAN_OFFICER%'
      <!--  and (man.type is null or (man.type = '1')) -->
       <isNotEmpty prepend="AND"  property="authority">
			(emp.AREADEPARTMENTID in ($authority$) or emp.DEPARTMENTID in ($authority$) or emp.CITYDEPARTMENTID  in ($authority$))
		</isNotEmpty>
		<isNotEmpty property="areaDepartmentId" prepend="and">
			emp.areaDepartmentId in ($areaDepartmentId$)
		</isNotEmpty>
		order by emp.areadepartmentid desc,man.manager_sales_planning_id asc, man.credit_date desc,emp.openauthoritydate desc
  </sql>
  <!--员工列表中信贷员的信息 -->
  <select id="selectManagerSalesPlanningContractMoney2" parameterClass="java.util.Map" resultMap="employeeResultMap">
  	
	<include refid="selectManagerSalesPlanningContractList2"/>
	
  </select>
  
  <select id="selectManagerSalesPlanningContractListCount2" parameterClass="java.util.HashMap" resultClass="int">
  	select count(*) from (<include refid="selectManagerSalesPlanningContractList2"/>)
  </select>
  
  <!--end -->
  
  <select id="selectManagerSales" parameterClass="java.util.Map" resultClass="com.creditease.rc.domain.ManagerSalesPlanning">
            select * from rl_manager_sales_planning man where man.year is not null and man.type='0'
             <isNotEmpty prepend="AND"  property="authority">
			(man.area_department_id in ($authority$))
		</isNotEmpty>
		<isNotEmpty property="year" prepend="and">
			man.year=#year#
		</isNotEmpty>
		<isNotEmpty property="areaDepartmentId" prepend="and">
			man.area_department_id in ($areaDepartmentId$)
		</isNotEmpty>
  </select>
  
   <select id="selectManagerSalesContractMoney" parameterClass="java.util.Map" resultClass="com.creditease.rc.domain.ManagerSalesPlanning">
            select * from rl_manager_sales_planning man where man.year is not null and man.type='1'
             <isNotEmpty prepend="AND"  property="authority">
			(man.area_department_id in ($authority$))
		</isNotEmpty>
		<isNotEmpty property="year" prepend="and">
			man.year=#year#
		</isNotEmpty>
		<isNotEmpty property="areaDepartmentId" prepend="and">
			man.area_department_id in ($areaDepartmentId$)
		</isNotEmpty>
  </select>
</sqlMap>