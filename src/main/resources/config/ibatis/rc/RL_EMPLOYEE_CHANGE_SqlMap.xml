<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RL_EMPLOYEE_CHANGE" >
	<typeAlias alias="EmployeeChangeClass" type="com.creditease.rc.domain.EmployeeChange" />
  <resultMap id="abatorgenerated_EmployeeChangeResult" class="com.creditease.rc.domain.EmployeeChange" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <result column="EMPLOYEE_CHANGE_ID" property="employeeChangeId" jdbcType="DECIMAL" />
    <result column="COMEMPID" jdbcType="INTEGER" property="comEmpId" />
    <result column="ACCOUNT" property="account" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="CITYDEPARTMENTNAME" property="citydepartmentname" jdbcType="VARCHAR" />
    <result column="AREADEPARTMENTNAME" property="areadepartmentname" jdbcType="VARCHAR" />
    <result column="ROLENAME" property="rolename" jdbcType="VARCHAR" />
    <result column="DEPARTMENTNAME" property="departmentname" jdbcType="VARCHAR" />
    <result column="ACTIVESTATUS" property="activestatus" jdbcType="CHAR" />
    <result column="ISACTIVE" property="isactive" jdbcType="CHAR" />
    <result column="CHANGEDATE" property="changedate" jdbcType="TIMESTAMP" />
  </resultMap>
  
  
  <!-- 根据员工id号查询历史变更 -->
  <select id="queryHistoryChange" parameterClass="int" resultClass="EmployeeChangeClass">
  	select e.COMEMPID as comEmpId,
       e.account as account,
       e.name as name,
       e.citydepartmentname as citydepartmentname,
       e.areadepartmentname as areadepartmentname,
       e.rolename as rolename,
       e.departmentname as departmentname,
       e.changedate as changedate,
       (select rc.code_value from rl_codetable rc where rc.section='isActive' and e.isactive=rc.code_key ) as isactive,
       (select rc.code_value from rl_codetable rc where rc.section='activeStatus' and e.activestatus=rc.code_key ) as activestatus 
 from rl_employee_change e where e.COMEMPID=#comEmpId#
  </select>
  
  <!-- 根据员工id查询是否有改条变更数据 -->
  <select id="selectHistoryCount" resultClass="int" parameterClass="int">
  	select count(*) from rl_employee_change e where e.COMEMPID=#comEmpId#
  </select>
  
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_EmployeeChangeResult" parameterClass="com.creditease.rc.domain.EmployeeChange" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    select EMPLOYEE_CHANGE_ID, COMEMPID, ACCOUNT, NAME, CITYDEPARTMENTNAME, AREADEPARTMENTNAME,
      ROLENAME, DEPARTMENTNAME, ACTIVESTATUS, ISACTIVE, CHANGEDATE
    from RL_EMPLOYEE_CHANGE
    where EMPLOYEE_CHANGE_ID = #employeeChangeId:DECIMAL#
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.creditease.rc.domain.EmployeeChange" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    delete from RL_EMPLOYEE_CHANGE
    where EMPLOYEE_CHANGE_ID = #employeeChangeId:DECIMAL#
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.creditease.rc.domain.EmployeeChange" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <selectKey resultClass="java.lang.Long" keyProperty="employeeChangeId" >
      select SEQ_BASIC_INFO.NEXTVAL  from dual
    </selectKey>
    insert into RL_EMPLOYEE_CHANGE (EMPLOYEE_CHANGE_ID,COMEMPID, ACCOUNT, NAME, CITYDEPARTMENTNAME, AREADEPARTMENTNAME,
      ROLENAME, DEPARTMENTNAME, ACTIVESTATUS, ISACTIVE, CHANGEDATE)
    values (#employeeChangeId:DECIMAL#,#comEmpId:INTEGER#, #account:VARCHAR#, #name:VARCHAR#, #citydepartmentname:VARCHAR#,
      #areadepartmentname:VARCHAR#, #rolename:VARCHAR#, #departmentname:VARCHAR#,
      #activestatus:CHAR#, #isactive:CHAR#, #changedate:TIMESTAMP#)
    
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.creditease.rc.domain.EmployeeChange" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    update RL_EMPLOYEE_CHANGE
    set COMEMPID = #comEmpId:INTEGER#,
      ACCOUNT = #account:VARCHAR#,
      NAME = #name:VARCHAR#,
      CITYDEPARTMENTNAME = #citydepartmentname:VARCHAR#,
      AREADEPARTMENTNAME = #areadepartmentname:VARCHAR#,
      ROLENAME = #rolename:VARCHAR#,
      DEPARTMENTNAME = #departmentname:VARCHAR#,
      ACTIVESTATUS = #activestatus:CHAR#,
      ISACTIVE = #isactive:CHAR#,
      CHANGEDATE = #changedate:TIMESTAMP#
    where EMPLOYEE_CHANGE_ID = #employeeChangeId:DECIMAL#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.creditease.rc.domain.EmployeeChange" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    update RL_EMPLOYEE_CHANGE
    <dynamic prepend="set" >
      <isNotNull prepend="," property="comEmpId" >
        COMEMPID = #comEmpId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="account" >
        ACCOUNT = #account:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        NAME = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="citydepartmentname" >
        CITYDEPARTMENTNAME = #citydepartmentname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="areadepartmentname" >
        AREADEPARTMENTNAME = #areadepartmentname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rolename" >
        ROLENAME = #rolename:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="departmentname" >
        DEPARTMENTNAME = #departmentname:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="activestatus" >
        ACTIVESTATUS = #activestatus:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="isactive" >
        ISACTIVE = #isactive:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="changedate" >
        CHANGEDATE = #changedate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where EMPLOYEE_CHANGE_ID = #employeeChangeId:DECIMAL#
  </update>
</sqlMap>