<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="RL_BORROWER_SERVICE_APP">
	<typeAlias alias="borrower_service_app" type="com.creditease.rc.domain.BorrowerService" />
	<typeAlias alias="borrower_service_app_vo" type="com.creditease.rc.vo.BorrowerServiceVo"/>
	<typeAlias alias="borrower_service_Result" type="com.creditease.rc.vo.BorrowerServiceVo2"/>
	<resultMap id="abatorgenerated_BorrowerServiceAppResult" class="com.creditease.rc.domain.BorrowerService">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		<result column="BORROWER_SERVICE_APP_ID" property="borrowerServiceAppId" jdbcType="DECIMAL" />
		<result column="CREDITAPPLICATION_ID" property="creditapplicationId" jdbcType="DECIMAL" />
		<result column="CUSTOMER_BASIC_ID" property="customerBasicId" jdbcType="DECIMAL" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="LEADER" property="leader" jdbcType="CHAR" />
		<result column="FORMER" property="former" jdbcType="VARCHAR" />
		<result column="GENDER" property="gender" jdbcType="CHAR" />
		<result column="HOME_ADDRESS" property="homeAddress" jdbcType="VARCHAR" />
		<result column="AGE" property="age" jdbcType="DECIMAL" />
		<result column="RESIDENCE_ADDRESS" property="residenceAddress" jdbcType="VARCHAR" />
		<result column="CREDENTIALS_NUMBER" property="credentialsNumber" jdbcType="VARCHAR" />
		<result column="CREDENTIALS_TYPE" property="credentialsType" jdbcType="CHAR" />
		<result column="BORR_REMARK" property="borrRemark" jdbcType="VARCHAR" />
		<result column="APPLY_DATE" property="applyDate" jdbcType="TIMESTAMP" />
		<result column="MOBILEPHONE" property="mobilephone" jdbcType="VARCHAR" />
		<result column="PAYMENT_SOURCE" property="paymentSource" jdbcType="VARCHAR" />
		<result column="APPLY_LIMIT" property="applyLimit" jdbcType="DECIMAL" />
		<result column="MAX_MONTHLY_PAYMENT" property="maxMonthlyPayment" jdbcType="DECIMAL" />
		<result column="DETAILS_LOANS_USE" property="detailsLoansUse" jdbcType="VARCHAR" />
		<result column="DETAILS_LOANS_USE_TYPE" property="detailsLoansUseType" jdbcType="CHAR" />
		<result column="LIVING_COMMERCIAL" property="livingCommercial" jdbcType="CHAR" />
		<result column="LIVING_SELF" property="livingSelf" jdbcType="CHAR" />
		<result column="LIVING_RENT" property="livingRent" jdbcType="CHAR" />
		<result column="LIVING_RELATIVE" property="livingRelative" jdbcType="CHAR" />
		<result column="LIVING_OTHER" property="livingOther" jdbcType="CHAR" />
		<result column="LIVING_DATE" property="livingDate" jdbcType="TIMESTAMP" />
		<result column="LIVING_AREA" property="livingArea" jdbcType="VARCHAR" />
		<result column="CREDIT_CONTRACT" property="creditContract" jdbcType="VARCHAR" />
		<result column="FAMILY_INCOME" property="familyIncome" jdbcType="DECIMAL" />
		<result column="AUDIT_STATUS" property="auditStatus" jdbcType="CHAR" />
		<result column="COUNTY_ID" property="countyId" jdbcType="DECIMAL" />
		<result column="TOWN_ID" property="townId" jdbcType="DECIMAL" />
		<result column="VILLAGE_ID" property="villageId" jdbcType="DECIMAL" />
		<result column="CONSULTE_SOURCE" property="consulteSource" jdbcType="CHAR" />
		<result column="DETAILS_CONSULTE_SOURCE" property="detailsConsulteSource" jdbcType="VARCHAR" />
		<result column="FIRST_FLAG" property="firstFlag" jdbcType="CHAR" />
		<result column="SECOND_FLAG" property="secondFlag" jdbcType="CHAR" />
		<result column="THIRD_FLAG" property="thirdFlag" jdbcType="CHAR" />
		<result column="VALID_STATE" property="validState" jdbcType="CHAR" />
		<result column="NATIONALITY" property="nationality" jdbcType="VARCHAR" />
		<result column="LIVING_YEAR" property="livingYear" jdbcType="DECIMAL" />
		<result column="BUSINESS_COMMERCIAL" property="businessCommercial" jdbcType="CHAR" />
		<result column="BUSINESS_SELF" property="businessSelf" jdbcType="CHAR" />
		<result column="BUSINESS_RENT" property="businessRent" jdbcType="CHAR" />
		<result column="BUSINESS_RELATIVE" property="businessRelative" jdbcType="CHAR" />
		<result column="BUSINESS_OTHER" property="businessOther" jdbcType="CHAR" />
		<result column="BUSINESS_DATE" property="businessDate" jdbcType="TIMESTAMP" />
		<result column="BUSINESS_AREA" property="businessArea" jdbcType="VARCHAR" />
		<result column="BUSINESS_YEAR" property="businessYear" jdbcType="DECIMAL" />
		<result column="OFFICE_PHONE" property="officePhone" jdbcType="VARCHAR" />
		<result column="MARITAL_STATUS" property="maritalStatus" jdbcType="CHAR" />
		<result column="JOB_STATUS" property="jobStatus" jdbcType="CHAR" />
		<result property="birthday" column="BIRTHDAY" jdbcType="VARCHAR" />
		<result property="bondsmanBorrower" column="BONDSMAN_BORROWER" jdbcType="CHAR" />
		<result property="nationalityText" column="NATIONALITYTEXT" jdbcType="CHAR" />
		<result property="hourseholdAddress" column="HOUSEHOLD_ADDRESS" jdbcType="VARCHAR" />
	</resultMap>
	<resultMap id="borrowerServiceAppResult" class="com.creditease.rc.vo.BorrowerServiceAppVo2">
		<result column="BORROWER_SERVICE_APP_ID" property="borrowerServiceAppId" jdbcType="DECIMAL" />
		<result column="CREDITAPPLICATION_ID" property="creditapplicationId" jdbcType="DECIMAL" />
		<result column="CUSTOMER_BASIC_ID" property="customerBasicId" jdbcType="DECIMAL" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="LEADER" property="leader" jdbcType="CHAR" />
		<result column="FORMER" property="former" jdbcType="VARCHAR" />
		<result column="GENDER" property="gender" jdbcType="CHAR" />
		<result column="HOME_ADDRESS" property="homeAddress" jdbcType="VARCHAR" />
		<result column="AGE" property="age" jdbcType="DECIMAL" />
		<result column="RESIDENCE_ADDRESS" property="residenceAddress" jdbcType="VARCHAR" />
		<result column="CREDENTIALS_NUMBER" property="credentialsNumber" jdbcType="VARCHAR" />
		<result column="CREDENTIALS_TYPE" property="credentialsType" jdbcType="CHAR" />
		<result column="BORR_REMARK" property="borrRemark" jdbcType="VARCHAR" />
		<result column="APPLY_DATE" property="applyDate" jdbcType="TIMESTAMP" />
		<result column="MOBILEPHONE" property="mobilephone" jdbcType="VARCHAR" />
		<result column="PAYMENT_SOURCE" property="paymentSource" jdbcType="VARCHAR" />
		<result column="APPLY_LIMIT" property="applyLimit" jdbcType="DECIMAL" />
		<result column="MAX_MONTHLY_PAYMENT" property="maxMonthlyPayment" jdbcType="DECIMAL" />
		<result column="DETAILS_LOANS_USE" property="detailsLoansUse" jdbcType="VARCHAR" />
		<result column="DETAILS_LOANS_USE_TYPE" property="detailsLoansuseType" jdbcType="CHAR" />
		<result column="LIVING_COMMERCIAL" property="livingCommercial" jdbcType="CHAR" />
		<result column="LIVING_SELF" property="livingSelf" jdbcType="CHAR" />
		<result column="LIVING_RENT" property="livingRent" jdbcType="CHAR" />
		<result column="LIVING_RELATIVE" property="livingRelative" jdbcType="CHAR" />
		<result column="LIVING_OTHER" property="livingOther" jdbcType="CHAR" />
		<result column="LIVING_DATE" property="livingDate" jdbcType="TIMESTAMP" />
		<result column="LIVING_AREA" property="livingArea" jdbcType="VARCHAR" />
		<result column="CREDIT_CONTRACT" property="creditContract" jdbcType="VARCHAR" />
		<result column="FAMILY_INCOME" property="familyIncome" jdbcType="DECIMAL" />
		<result column="AUDIT_STATUS" property="auditStatus" jdbcType="CHAR" />
		<result column="COUNTY_ID" property="countyId" jdbcType="DECIMAL" />
		<result column="TOWN_ID" property="townId" jdbcType="DECIMAL" />
		<result column="VILLAGE_ID" property="villageId" jdbcType="DECIMAL" />
		<result column="CONSULTE_SOURCE" property="consulteSource" jdbcType="CHAR" />
		<result column="DETAILS_CONSULTE_SOURCE" property="detailsConsulteSource" jdbcType="VARCHAR" />
		<result column="FIRST_FLAG" property="firstFlag" jdbcType="CHAR" />
		<result column="SECOND_FLAG" property="secondFlag" jdbcType="CHAR" />
		<result column="THIRD_FLAG" property="thirdFlag" jdbcType="CHAR" />
		<result column="VALID_STATE" property="validState" jdbcType="CHAR" />
		<result column="NATIONALITY" property="national" jdbcType="VARCHAR" />
		<result column="LIVING_YEAR" property="livingYear" jdbcType="DECIMAL" />
		<result column="BUSINESS_COMMERCIAL" property="businessCommercial" jdbcType="CHAR" />
		<result column="BUSINESS_SELF" property="businessSelf" jdbcType="CHAR" />
		<result column="BUSINESS_RENT" property="businessRent" jdbcType="CHAR" />
		<result column="BUSINESS_RELATIVE" property="businessRelative" jdbcType="CHAR" />
		<result column="BUSINESS_OTHER" property="businessOther" jdbcType="CHAR" />
		<result column="BUSINESS_DATE" property="businessDate" jdbcType="TIMESTAMP" />
		<result column="BUSINESS_AREA" property="businessArea" jdbcType="VARCHAR" />
		<result column="BUSINESS_YEAR" property="businessYear" jdbcType="DECIMAL" />
		<result column="OFFICE_PHONE" property="officePhone" jdbcType="VARCHAR" />
		<result column="MARITAL_STATUS" property="maritalStatus" jdbcType="CHAR" />
		<result column="JOB_STATUS" property="jobStatus" jdbcType="CHAR" />
		<result property="birthday" column="BIRTHDAY" jdbcType="VARCHAR" />
		<result property="bondsmanBorrower" column="BONDSMAN_BORROWER" jdbcType="CHAR" />
		<result property="hourseholdAddress" column="HOUSEHOLD_ADDRESS" jdbcType="VARCHAR" />
	</resultMap>
	
	<!-- 根据信贷申请id查询借款人信息 -->
	<select id="queryBorrowerInfo" parameterClass="long" resultMap="borrowerServiceAppResult">
		select t.* from rl_borrower_service_app t where t.creditapplication_id=#creditapplicationId#
	</select>
	
	<select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_BorrowerServiceAppResult" parameterClass="com.creditease.rc.domain.BorrowerService">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		select bsa.*,ct.code_value NATIONALITYTEXT
		from RL_BORROWER_SERVICE_APP bsa left join rl_codetable ct on (ct.code_key = bsa.nationality and ct.section='national')
		where BORROWER_SERVICE_APP_ID = #borrowerServiceAppId:DECIMAL#
	</select>
	<delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.creditease.rc.domain.BorrowerService">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		delete from RL_BORROWER_SERVICE_APP
		where BORROWER_SERVICE_APP_ID = #borrowerServiceAppId:DECIMAL#
	</delete>
	<insert id="abatorgenerated_insert" parameterClass="com.creditease.rc.domain.BorrowerService">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		<selectKey keyProperty="borrowerServiceAppId" resultClass="java.lang.Long" type="pre">

			select SEQ_BASIC_INFO.NEXTVAL as value from dual
        </selectKey>
		insert into RL_BORROWER_SERVICE_APP (BORROWER_SERVICE_APP_ID, CREDITAPPLICATION_ID,
		CUSTOMER_BASIC_ID, NAME, LEADER, FORMER, GENDER, HOME_ADDRESS, AGE, RESIDENCE_ADDRESS,
		CREDENTIALS_NUMBER, CREDENTIALS_TYPE, BORR_REMARK, APPLY_DATE, MOBILEPHONE, PAYMENT_SOURCE,
		APPLY_LIMIT, MAX_MONTHLY_PAYMENT, DETAILS_LOANS_USE, DETAILS_LOANS_USE_TYPE,
		LIVING_COMMERCIAL, LIVING_SELF, LIVING_RENT, LIVING_RELATIVE, LIVING_OTHER, LIVING_DATE,
		LIVING_AREA, CREDIT_CONTRACT, FAMILY_INCOME, AUDIT_STATUS, COUNTY_ID, TOWN_ID, VILLAGE_ID,
		CONSULTE_SOURCE, DETAILS_CONSULTE_SOURCE, VALID_STATE,
		NATIONALITY, LIVING_YEAR, BUSINESS_COMMERCIAL, BUSINESS_SELF, BUSINESS_RENT,
		BUSINESS_RELATIVE, BUSINESS_OTHER, BUSINESS_DATE, BUSINESS_AREA, BUSINESS_YEAR, OFFICE_PHONE,
		MARITAL_STATUS, JOB_STATUS,BIRTHDAY,HOUSEHOLD_ADDRESS)
		values (#borrowerServiceAppId:DECIMAL#, #creditapplicationId:DECIMAL#,
		#customerBasicId:DECIMAL#, #name:VARCHAR#, #leader:CHAR#, #former:VARCHAR#, #gender:CHAR#,
		#homeAddress:VARCHAR#, #age:DECIMAL#, #residenceAddress:VARCHAR#,
		#credentialsNumber:VARCHAR#,
		#credentialsType:CHAR#, #borrRemark:VARCHAR#, #applyDate:TIMESTAMP#, #mobilephone:VARCHAR#,
		#paymentSource:VARCHAR#, #applyLimit:DECIMAL#, #maxMonthlyPayment:DECIMAL#,
		#detailsLoansUse:VARCHAR#, #detailsLoansUseType:CHAR#, #livingCommercial:CHAR#,
		#livingSelf:CHAR#, #livingRent:CHAR#, #livingRelative:CHAR#, #livingOther:CHAR#,
		#livingDate:TIMESTAMP#, #livingArea:VARCHAR#, #creditContract:VARCHAR#,
		#familyIncome:DECIMAL#, #auditStatus:CHAR#, #countyId:DECIMAL#, #townId:DECIMAL#,
		#villageId:DECIMAL#, #consulteSource:CHAR#, #detailsConsulteSource:VARCHAR#,
		#validState:CHAR#, #nationality:VARCHAR#,
		#livingYear:DECIMAL#, #businessCommercial:CHAR#, #businessSelf:CHAR#, #businessRent:CHAR#,
		#businessRelative:CHAR#, #businessOther:CHAR#, #businessDate:TIMESTAMP#,
		#businessArea:VARCHAR#, #businessYear:DECIMAL#, #officePhone:VARCHAR#, #maritalStatus:CHAR#,
		#jobStatus:CHAR#,#birthday:VARCHAR#,#hourseholdAddress#)
	</insert>
	<update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.creditease.rc.domain.BorrowerService">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		update RL_BORROWER_SERVICE_APP
		set CREDITAPPLICATION_ID = #creditapplicationId:DECIMAL#,
		<dynamic prepend=" ">
			<isNotEmpty prepend=" " property="customerBasicId">
			CUSTOMER_BASIC_ID = #customerBasicId:DECIMAL#,
			</isNotEmpty>
		</dynamic>
		NAME = #name:VARCHAR#,
		LEADER = #leader:CHAR#,
		FORMER = #former:VARCHAR#,
		GENDER = #gender:CHAR#,
		HOME_ADDRESS = #homeAddress:VARCHAR#,
		AGE = #age:DECIMAL#,
		RESIDENCE_ADDRESS = #residenceAddress:VARCHAR#,
		CREDENTIALS_NUMBER = #credentialsNumber:VARCHAR#,
		CREDENTIALS_TYPE = #credentialsType:CHAR#,
		BORR_REMARK = #borrRemark:VARCHAR#,
		APPLY_DATE = #applyDate:TIMESTAMP#,
		MOBILEPHONE = #mobilephone:VARCHAR#,
		PAYMENT_SOURCE = #paymentSource:VARCHAR#,
		APPLY_LIMIT = #applyLimit:DECIMAL#,
		MAX_MONTHLY_PAYMENT = #maxMonthlyPayment:DECIMAL#,
		DETAILS_LOANS_USE = #detailsLoansUse:VARCHAR#,
		DETAILS_LOANS_USE_TYPE = #detailsLoansUseType:CHAR#,
		LIVING_COMMERCIAL = #livingCommercial:CHAR#,
		LIVING_SELF = #livingSelf:CHAR#,
		LIVING_RENT = #livingRent:CHAR#,
		LIVING_RELATIVE = #livingRelative:CHAR#,
		LIVING_OTHER = #livingOther:CHAR#,
		LIVING_DATE = #livingDate:TIMESTAMP#,
		LIVING_AREA =
		#livingArea:VARCHAR#,
		CREDIT_CONTRACT = #creditContract:VARCHAR#,
		FAMILY_INCOME = #familyIncome:DECIMAL#,
		AUDIT_STATUS = #auditStatus:CHAR#,
		COUNTY_ID = #countyId:DECIMAL#,
		TOWN_ID = #townId:DECIMAL#,
		VILLAGE_ID = #villageId:DECIMAL#,
		CONSULTE_SOURCE = #consulteSource:CHAR#,
		DETAILS_CONSULTE_SOURCE = #detailsConsulteSource:VARCHAR#,
		FIRST_FLAG = #firstFlag:CHAR#,
		SECOND_FLAG = #secondFlag:CHAR#,
		THIRD_FLAG = #thirdFlag:CHAR#,
		VALID_STATE = #validState:CHAR#,
		NATIONALITY = #nationality:VARCHAR#,
		LIVING_YEAR = #livingYear:DECIMAL#,
		BUSINESS_COMMERCIAL = #businessCommercial:CHAR#,
		BUSINESS_SELF = #businessSelf:CHAR#,
		BUSINESS_RENT = #businessRent:CHAR#,
		BUSINESS_RELATIVE = #businessRelative:CHAR#,
		BUSINESS_OTHER = #businessOther:CHAR#,
		BUSINESS_DATE = #businessDate:TIMESTAMP#,
		BUSINESS_AREA = #businessArea:VARCHAR#,
		BUSINESS_YEAR = #businessYear:DECIMAL#,
		OFFICE_PHONE = #officePhone:VARCHAR#,
		MARITAL_STATUS = #maritalStatus:CHAR#,
		JOB_STATUS = #jobStatus:CHAR#,
		BIRTHDAY = #birthday:VARCHAR#,
		HOUSEHOLD_ADDRESS=#hourseholdAddress#,
		BONDSMAN_BORROWER = #bondsmanBorrower:CHAR#
		where BORROWER_SERVICE_APP_ID =
		#borrowerServiceAppId:DECIMAL#
	</update>

	<update id="updateBorroerServiceApp" parameterClass="com.creditease.rc.domain.BorrowerService">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		<![CDATA[
		update RL_BORROWER_SERVICE_APP
		set
		FIRST_FLAG = #firstFlag:CHAR#,
		NAME = #name:VARCHAR#,
		FORMER = #former:VARCHAR#,
		GENDER = #gender:CHAR#,
		]]>
		<dynamic prepend=" ">
			<isNotEmpty prepend=" " property="customerBasicId">
			CUSTOMER_BASIC_ID = #customerBasicId:DECIMAL#,
			</isNotEmpty>
		</dynamic>
		<![CDATA[
		CREDENTIALS_NUMBER = #credentialsNumber:VARCHAR#,
		APPLY_DATE = #applyDate:TIMESTAMP#,
		MOBILEPHONE = #mobilephone:VARCHAR#,
		APPLY_LIMIT = #applyLimit:DECIMAL#,
		LIVING_COMMERCIAL = #livingCommercial:CHAR#,
		LIVING_SELF = #livingSelf:CHAR#,
		LIVING_RENT = #livingRent:CHAR#,
		LIVING_RELATIVE = #livingRelative:CHAR#,
		LIVING_OTHER = #livingOther:CHAR#,
		LIVING_DATE = #livingDate:TIMESTAMP#,
		LIVING_AREA = #livingArea:VARCHAR#,
		NATIONALITY = #nationality:VARCHAR#,
		LIVING_YEAR = #livingYear:DECIMAL#,
		BUSINESS_COMMERCIAL = #businessCommercial:CHAR#,
		BUSINESS_SELF = #businessSelf:CHAR#,
		BUSINESS_RENT = #businessRent:CHAR#,
		BUSINESS_RELATIVE = #businessRelative:CHAR#,
		BUSINESS_OTHER = #businessOther:CHAR#,
		BUSINESS_DATE = #businessDate:TIMESTAMP#,
		BUSINESS_AREA = #businessArea:VARCHAR#,
		BUSINESS_YEAR = #businessYear:DECIMAL#,
		OFFICE_PHONE = #officePhone:VARCHAR#,
		MARITAL_STATUS = #maritalStatus:CHAR#,
		JOB_STATUS = #jobStatus:CHAR#,
		BIRTHDAY = #birthday:VARCHAR#,
		VILLAGE_ID = #villageId#,
		HOME_ADDRESS = #homeAddress:VARCHAR#,
		TOWN_ID = #townId#,
		HOUSEHOLD_ADDRESS=#hourseholdAddress#,
		RESIDENCE_ADDRESS = #residenceAddress:VARCHAR#,
		BONDSMAN_BORROWER = #bondsmanBorrower:CHAR#
		where BORROWER_SERVICE_APP_ID = #borrowerServiceAppId:DECIMAL#
		]]>
	</update>

	<update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.creditease.rc.domain.BorrowerService">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		update RL_BORROWER_SERVICE_APP
		set
		<dynamic prepend=" ">
			<isNotNull prepend="," property="creditapplicationId">
				CREDITAPPLICATION_ID = #creditapplicationId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="leader">
				LEADER = #leader:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="name">
				NAME= #name:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="former">
				FORMER = #former:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="gender">
				GENDER = #gender:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="homeAddress">
				HOME_ADDRESS = #homeAddress:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="age">
				AGE = #age:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="residenceAddress">
				RESIDENCE_ADDRESS = #residenceAddress:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="credentialsNumber">
				CREDENTIALS_NUMBER = #credentialsNumber:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="credentialsType">
				CREDENTIALS_TYPE = #credentialsType:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="borrRemark">
				BORR_REMARK = #borrRemark:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="applyDate">
				APPLY_DATE = #applyDate:TIMESTAMP#
      </isNotNull>
			<isNotNull prepend="," property="mobilephone">
				MOBILEPHONE = #mobilephone:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="paymentSource">
				PAYMENT_SOURCE = #paymentSource:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="applyLimit">
				APPLY_LIMIT = #applyLimit:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="maxMonthlyPayment">
				MAX_MONTHLY_PAYMENT = #maxMonthlyPayment:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="detailsLoansUse">
				DETAILS_LOANS_USE = #detailsLoansUse:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="detailsLoansUseType">
				DETAILS_LOANS_USE_TYPE = #detailsLoansUseType:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="livingCommercial">
				LIVING_COMMERCIAL = #livingCommercial:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="livingSelf">
				LIVING_SELF = #livingSelf:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="livingRent">
				LIVING_RENT = #livingRent:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="livingRelative">
				LIVING_RELATIVE = #livingRelative:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="livingOther">
				LIVING_OTHER = #livingOther:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="livingDate">
				LIVING_DATE = #livingDate:TIMESTAMP#
      </isNotNull>
			<isNotNull prepend="," property="livingArea">
				LIVING_AREA = #livingArea:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="creditContract">
				CREDIT_CONTRACT = #creditContract:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="familyIncome">
				FAMILY_INCOME = #familyIncome:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="auditStatus">
				AUDIT_STATUS = #auditStatus:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="countyId">
				COUNTY_ID = #countyId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="townId">
				TOWN_ID = #townId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="villageId">
				VILLAGE_ID = #villageId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="consulteSource">
				CONSULTE_SOURCE = #consulteSource:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="detailsConsulteSource">
				DETAILS_CONSULTE_SOURCE = #detailsConsulteSource:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="firstFlag">
				FIRST_FLAG = #firstFlag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="hourseholdAddress">
      	HOUSEHOLD_ADDRESS=#hourseholdAddress#
      </isNotNull>

			<isNotNull prepend="," property="secondFlag">
				SECOND_FLAG = #secondFlag:CHAR#
      </isNotNull>

			<isNotNull prepend="," property="thirdFlag">
				THIRD_FLAG = #thirdFlag:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="validState">
				VALID_STATE = #validState:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="nationality">
				NATIONALITY = #nationality:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="livingYear">
				LIVING_YEAR = #livingYear:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="businessCommercial">
				BUSINESS_COMMERCIAL = #businessCommercial:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="businessSelf">
				BUSINESS_SELF = #businessSelf:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="businessRent">
				BUSINESS_RENT = #businessRent:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="businessRelative">
				BUSINESS_RELATIVE = #businessRelative:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="businessOther">
				BUSINESS_OTHER = #businessOther:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="businessDate">
				BUSINESS_DATE = #businessDate:TIMESTAMP#
      </isNotNull>
			<isNotNull prepend="," property="businessArea">
				BUSINESS_AREA = #businessArea:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="businessYear">
				BUSINESS_YEAR = #businessYear:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="officePhone">
				OFFICE_PHONE = #officePhone:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="maritalStatus">
				MARITAL_STATUS = #maritalStatus:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="jobStatus">
				JOB_STATUS = #jobStatus:CHAR#
      </isNotNull>
			<isNotNull prepend="," property="birthday">
				BIRTHDAY = #birthday:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="bondsmanBorrower">
				BONDSMAN_BORROWER = #bondsmanBorrower:CHAR#
      </isNotNull>
		</dynamic>
		where BORROWER_SERVICE_APP_ID = #borrowerServiceAppId:DECIMAL#
	</update>
	<select id="quertyGuaranorList" parameterClass="java.lang.Long" resultClass="borrower_service_app_vo">
		SELECT NAME as name,
		CREDENTIALS_NUMBER as credentialsNumber,
		FIRST_FLAG as firstFlag,
		SECOND_FLAG as secondFlag,
		THIRD_FLAG as contactFlag,
		BORROWER_SERVICE_APP_ID as borrowerServiceAppId
		FROM RL_BORROWER_SERVICE_APP
		WHERE CREDITAPPLICATION_ID = #creditapplicationId:DECIMAL#
		AND VALID_STATE = 1
		and LEADER = 0  
	</select>
	<select id="byPrimaryKey" resultMap="abatorgenerated_BorrowerServiceAppResult" parameterClass="java.lang.Long">
		select * from RL_BORROWER_SERVICE_APP
		where BORROWER_SERVICE_APP_ID = #value#
	</select>
	
	<select id="select" parameterClass="borrower_service_app" resultClass="java.util.HashMap">
		select * from rl_borrower_service_app b  
		<dynamic prepend="where">
			<isNotEmpty prepend="and " property="borrowerServiceAppId">
				 b.borrower_service_app_id = #borrowerServiceAppId#
			</isNotEmpty>
			<isNotEmpty prepend=" and" property="credentialsNumber">
				 b.CREDENTIALS_NUMBER = #credentialsNumber#
			</isNotEmpty>
			<isNotEmpty prepend=" and" property="name">
				 b.NAME = #name#
			</isNotEmpty>
			<isNotEmpty prepend=" and" property="customerBasicId">
				 b.CUSTOMER_BASIC_ID = #customerBasicId#
			</isNotEmpty>
		</dynamic>
	</select>
	
	<!-- 用于循环贷 -->
	<!-- 查询该身份证号 是否借过款  -->
	<select id="selectBorrowerFinishLoan" parameterClass="String" resultClass="java.util.HashMap">	
		<![CDATA[
			SELECT C.CREDITAPPLICATION_ID 
			  FROM RL_BORROWER_SERVICE_APP B, 
			  		RL_CREDIT_APPLICATION C
			 WHERE UPPER(B.CREDENTIALS_NUMBER) = UPPER(#CREDENTIALS_NUMBER#)
			   AND C.CREDITAPPLICATION_ID = B.CREDITAPPLICATION_ID
			   AND B.LEADER = '1'
			   AND B.VALID_STATE = '1'
			   AND C.VALID_STATE = '1'
			   AND (C.AUDIT_STATUS = '16' OR C.AUDIT_STATUS = '20')
		]]>
	</select>
	<!-- 查询已经还款完成的借款人配偶 -->
	<select id="selectPartnerFinishLoan" parameterClass="String" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT C.CREDITAPPLICATION_ID
			  FROM RL_FAMILY_MEMBER        F,
			       RL_BORROWER_SERVICE_APP B,
			       RL_CREDIT_APPLICATION   C
			 WHERE UPPER(F.IDNUMBER) = UPPER(#credentialsNumber#)
			   AND C.CREDITAPPLICATION_ID = B.CREDITAPPLICATION_ID
			   AND F.BORROWERRE_RATIONSHIP = '2'
			   AND (C.AUDIT_STATUS = '16' OR C.AUDIT_STATUS = '20')
			   AND C.VALID_STATE = '1'
			   AND F.BORROWER_SERVICE_APP_ID = B.BORROWER_SERVICE_APP_ID
		]]>
	</select>
	<!-- 借款人 配偶两个都匹配   -->
	<select id="selectFinishCreditApplicationIdByBoth" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<![CDATA[
			SELECT C.CREDITAPPLICATION_ID
			  FROM RL_BORROWER_SERVICE_APP B,
			       RL_CREDIT_APPLICATION   C ,
			       RL_FAMILY_MEMBER F
			 WHERE F.BORROWERRE_RATIONSHIP = '2'
			   AND B.LEADER = '1'
			   AND F.BORROWER_SERVICE_APP_ID = B.BORROWER_SERVICE_APP_ID
			   AND C.CREDITAPPLICATION_ID = B.CREDITAPPLICATION_ID
			   AND (C.AUDIT_STATUS = '16' OR C.AUDIT_STATUS = '20')
			   AND C.VALID_STATE = '1'
			   AND UPPER(B.CREDENTIALS_NUMBER) = UPPER(#credentialsNumber#)
			   AND UPPER(F.IDNUMBER) = UPPER(#idNumber#)
		]]>
	</select>
	<!--
	 针对一期导入数据查询 已经到“还款中”，“还款完成”，“提前还款完成”  的 申请id 并且（一期借款人 = 二期配偶   & 一起共同借款人 = 二期借款人）
	-->
	<select id="selectCreditApplicationIdByBoth" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">	
		<![CDATA[
			SELECT C.CREDITAPPLICATION_ID
			  FROM RL_BORROWER_SERVICE_APP B,
			       RL_CREDIT_APPLICATION   C,
			       RL_FAMILY_MEMBER F
			 WHERE 1=1
			   AND F.BORROWERRE_RATIONSHIP = '2'
			   AND F.BORROWER_SERVICE_APP_ID = B.BORROWER_SERVICE_APP_ID
			   AND C.CREDITAPPLICATION_ID = B.CREDITAPPLICATION_ID
			   AND (C.AUDIT_STATUS = '16' OR C.AUDIT_STATUS = '20'OR C.AUDIT_STATUS = '15')
			   AND C.VALID_STATE = '1'
			   AND UPPER(B.CREDENTIALS_NUMBER) in UPPER('$credentialsNumbers$')
			   AND UPPER(F.IDNUMBER) in UPPER('$idNumbers$')
		]]>
	 
	</select>
	<!--
	 针对一期导入数据查询 已经到“还款中”，“还款完成”，“提前还款完成”  的 申请id 并且（一期借款人 = 二期借款人）  
	-->
	<select id="selectCreditApplicationIdByBorrower" parameterClass="String" resultClass="java.util.HashMap">	
		<![CDATA[
			SELECT C.CREDITAPPLICATION_ID
			  FROM RL_BORROWER_SERVICE_APP B,
			       RL_CREDIT_APPLICATION   C,
			       RL_FAMILY_MEMBER F
			 WHERE 1=1
			   AND F.BORROWERRE_RATIONSHIP = '2'
			   AND F.BORROWER_SERVICE_APP_ID = B.BORROWER_SERVICE_APP_ID
			   AND C.CREDITAPPLICATION_ID = B.CREDITAPPLICATION_ID
			   AND (C.AUDIT_STATUS = '16' OR C.AUDIT_STATUS = '20'OR C.AUDIT_STATUS = '15')
			   AND C.VALID_STATE = '1'
			   AND UPPER(B.CREDENTIALS_NUMBER) in UPPER('$credentialsNumbers$')
		]]>
	 
	</select>
	<!--
	 将借款申请的 循环贷标记 记为循环贷   manzhang
	-->
	<update id="updateRevolvingCredit" parameterClass="int">
		<![CDATA[
			UPDATE RL_CREDIT_APPLICATION C SET C.revolving_credit = '1'
			WHERE C.CREDITAPPLICATION_ID = #creditapplicationId#
		]]>
	</update>
	
	<!--
	 将借款申请的 循环贷标记 记为非循环贷  manzhang
	-->
	<update id="updateRevolvingCreditFalse" parameterClass="int">
		<![CDATA[
			UPDATE RL_CREDIT_APPLICATION C SET C.revolving_credit = '0'
			WHERE C.CREDITAPPLICATION_ID = #creditapplicationId#
		]]>
	</update>
	
	<!-- 针对一期导入数据 批量将借款申请的 循环贷标记 记为循环贷 -->
	<update id="updateRevolvingCreditBatch" parameterClass="String">
		<![CDATA[
			UPDATE RL_CREDIT_APPLICATION C SET C.revolving_credit = '1'
			WHERE C.CREDITAPPLICATION_ID in ($creditapplicationIds$)
			AND (C.AUDIT_STATUS = '16' OR C.AUDIT_STATUS = '20' OR C.AUDIT_STATUS = '15')
			AND C.VALID_STATE = '1'
		]]>
	</update>

    <!--是否试点营业部   -->
    <select id="queryIsSpecDepById" parameterClass="java.lang.Long" resultClass="java.lang.Integer">
		<![CDATA[
            select count(*) from rl_credit_special_dep sd  where sd.departmentid = #depId# and sd.enabled = 'true'
		]]>
	</select>

    <!--通过业务编号查询借款人信息   -->
    <select id="queryBorrowerServiceInfoByBussinessNumber" parameterClass="java.lang.String" resultClass="com.creditease.rc.domain.BorrowerService">
		<![CDATA[
           	select ba.name as name ,ba.credentials_number as credentialsNumber ,ba.customer_basic_id as customerBasicId,ba.age as age,ba.borrower_service_app_id as borrowerServiceAppId
             from rl_credit_application ca
             join rl_borrower_service_app ba  on ba.creditapplication_id = ca.creditapplication_id
             left  join rl_customer_basic_info bi on ba.customer_basic_id = bi.customer_basic_id
             where ba.leader = 1 and ca.business_number = #businessNumber#
		]]>
	</select>
    <!--通过业务编号查询担保人信息  -->
    <select id="queryGuarantyListInfoByBussinessNumber" parameterClass="java.lang.String" resultClass="com.creditease.rc.domain.BorrowerService">
		<![CDATA[
            	select ba.name as name ,ba.credentials_number as credentialsNumber,ba.customer_basic_id as customerBasicId,ba.age as age ,ba.borrower_service_app_id   as borrowerServiceAppId
                from rl_credit_application ca
                 join rl_borrower_service_app ba  on ba.creditapplication_id = ca.creditapplication_id
                 left  join rl_customer_basic_info bi on ba.customer_basic_id = bi.customer_basic_id
                where ba.valid_state = 1  and ba.leader = 0 and ca.business_number = #businessNumber#

		]]>
	</select>
    <!--通过业务编号查询共借人信息   -->
    <select id="queryCreditCoBorrowerInfoByBussinessNumber" parameterClass="java.lang.String" resultClass="com.creditease.rc.domain.CreditCoBorrower">
		<![CDATA[
        	select cb.name as name ,cb.idnumber as idNumber,bi.customer_basic_id as customerBasicId ,cb.age as age,cb.borrower_service_app_id as  borrowerServiceAppId,cb.coborrower_id  as coBorrowerId
            from rl_credit_application ca
             join rl_borrower_service_app ba  on ba.creditapplication_id = ca.creditapplication_id
             join rl_credit_coborrower cb on cb.borrower_service_app_id = ba.borrower_service_app_id
             left  join rl_customer_basic_info bi on upper(bi.credentials_number) = upper(cb.idnumber)
            where  ba.leader = 1  and ca.business_number = #businessNumber#
        ]]>
	</select>

    <!--   更新borrowerService表ID信息 -->
    <update id="updateBorrowerServiceIdInfo" parameterClass="com.creditease.rc.domain.BorrowerService">
		<![CDATA[
                update rl_borrower_service_app ba
                set ba.credentials_number = #credentialsNumber#,
                    ba.age = #age#
                where ba.borrower_service_app_id = #borrowerServiceAppId#
		]]>
	</update>

    <!-- 客户基本信息表ID信息 -->
    <update id="updateCutomerIdInfo" parameterClass="com.creditease.rc.domain.CustomerBasicInfo">
		<![CDATA[
            update rl_customer_basic_info bi
            set bi.credentials_number = #credentialsNumber#
             where bi.customer_basic_id = #customerBasicId#
		]]>
	</update>

    <!-- 更新共借人ID信息 -->
    <update id="updateCreditCoBorrowerIdInfo" parameterClass="com.creditease.rc.domain.CreditCoBorrower">
		<![CDATA[
            	update rl_credit_coborrower cb
                set cb.idnumber = #idNumber#,
                    cb.age = #age#
                where cb.coborrower_id = #coBorrowerId#
		]]>
	</update>
</sqlMap>