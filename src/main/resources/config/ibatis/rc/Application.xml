<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RL_APPLICATION" >
	<typeAlias alias="APPLICATION" type="com.creditease.rc.domain.Application"/>
  <resultMap id="abatorgenerated_ApplicationResult" class="com.creditease.rc.domain.Application" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <result column="APPLICATIONID" property="applicationid" jdbcType="DECIMAL" />
    <result column="BORROWER_SERVICE_APP_ID" property="borrowerServiceAppId" jdbcType="DECIMAL" />
    <result column="BORROW_USE" property="borrowUse" jdbcType="VARCHAR" />
    <result column="borroerUserConsult" property="borrowUseView" jdbcType="VARCHAR" />
    <result column="BORROW_USE_DETAIL" property="borrowUseDetail" jdbcType="VARCHAR" />
    <result column="QUANTITY" property="quantity" jdbcType="DECIMAL" />
    <result column="UNIT_PRICE" property="unitPrice" jdbcType="DECIMAL" />
    <result column="TOTAL_AMOUNT" property="totalAmount" jdbcType="DECIMAL" />
    <result column="PROVE_DOCUMENT" property="proveDocument" jdbcType="VARCHAR" />
    <result column="SEQ" property="seq" jdbcType="VARCHAR" />
  </resultMap>
  <insert id="abatorgenerated_insert" parameterClass="com.creditease.rc.domain.Application" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <selectKey type="pre" keyProperty="applicationid" resultClass="java.lang.Long">
			select SEQ_BASIC_INFO.NEXTVAL AS value from dual
	</selectKey>
    insert into RL_APPLICATION (APPLICATIONID, BORROWER_SERVICE_APP_ID, BORROW_USE,
      BORROW_USE_DETAIL, QUANTITY, UNIT_PRICE, TOTAL_AMOUNT, PROVE_DOCUMENT,SEQ)
    values (#applicationid:DECIMAL#, #borrowerServiceAppId:DECIMAL#, #borrowUse:VARCHAR#,
      #borrowUseDetail:VARCHAR#, #quantity:DECIMAL#, #unitPrice:DECIMAL#, #totalAmount:DECIMAL#,
      #proveDocument:VARCHAR#,#seq#)
  </insert>
  <select id="select" parameterClass="int" resultMap="abatorgenerated_ApplicationResult">
  	<![CDATA[
  		SELECT app.*,ct.code_value borroerUserConsult
  		FROM RL_APPLICATION app
      	left join rl_codetable ct on (ct.code_key = app.borrow_use and ct.section='borroerUserConsult')
  		WHERE APPLICATIONID=#applicationid:DECIMAL#
  	]]>
  </select>
  <update id="updateByborrowerServiceAppId" parameterClass="APPLICATION">
  		<![CDATA[
  			UPDATE RL_APPLICATION 
  			SET   
  				BORROW_USE = #borrowUse:VARCHAR#,
     			BORROW_USE_DETAIL =  #borrowUseDetail:VARCHAR#,
     			QUANTITY = #quantity:DECIMAL#,
     			UNIT_PRICE =#unitPrice:DECIMAL#,
     			TOTAL_AMOUNT =#totalAmount:DECIMAL#,
     			PROVE_DOCUMENT=#proveDocument:VARCHAR#
     		WHERE BORROWER_SERVICE_APP_ID= #borrowerServiceAppId:DECIMAL#
  		]]>
  </update>
  
  <update id="updateApplication" parameterClass="APPLICATION">
  		<![CDATA[
  			UPDATE RL_APPLICATION 
  			SET   
  				BORROW_USE = #borrowUse:VARCHAR#,
     			BORROW_USE_DETAIL =  #borrowUseDetail:VARCHAR#,
     			QUANTITY = #quantity:DECIMAL#,
     			UNIT_PRICE =#unitPrice:DECIMAL#,
     			TOTAL_AMOUNT =#totalAmount:DECIMAL#,
     			PROVE_DOCUMENT=#proveDocument:VARCHAR#
     		WHERE 
				APPLICATIONID = #applicationid:DECIMAL#
  		]]>
  </update>
    <select id="selectBorrowerServiceApp" parameterClass="long" resultMap="abatorgenerated_ApplicationResult">
  	<![CDATA[
  		SELECT app.*,ct.code_value borroerUserConsult
  		FROM RL_APPLICATION app
      	left join rl_codetable ct on (ct.code_key = app.borrow_use and ct.section='borroerUserConsult')
  		WHERE BORROWER_SERVICE_APP_ID=#borrowerServiceAppId:DECIMAL#
  	]]>
  </select>
  
  <!-- 根据借款申请 id 删除 -->
  <delete id="deleteByBSAId" parameterClass="Long">
  	DELETE FROM RL_APPLICATION WHERE BORROWER_SERVICE_APP_ID=#borrowerServiceAppId:INTEGER#
  </delete>
</sqlMap>