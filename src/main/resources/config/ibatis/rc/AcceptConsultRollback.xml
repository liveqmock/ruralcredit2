<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="ACCEPTCONSULTROLLBACK">
	<resultMap id="acceptConsultRollbackMap" class="com.creditease.rc.domain.AcceptConsultRollback">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		<result column="ACCEPT_CONSULT_ROLLBACK_ID" property="acceptConsultRollbackId" jdbcType="DECIMAL" />
		<result column="CONSULT_POOL_ID" property="consultPoolId" jdbcType="DECIMAL" />
		<result column="ROLLBACK_REASON" property="rollbackReason" jdbcType="VARCHAR" />
		<result column="OPERATOR" property="operator" jdbcType="VARCHAR" />
		<result column="OPERATE_DATE" property="operateDate" jdbcType="TIMESTAMP" />
		<result column="HISTORY_FLAG" property="historyFlag" jdbcType="VARCHAR" />
		<result column="OPERATOR_ID" property="operatorId" jdbcType="DECIMAL" />
		<result column="OPERATOR_BEFORE_STATE" property="operatorBeforeState" jdbcType="VARCHAR" />
		<result column="OPERATOR_AFTER_STATE" property="operatorAfterState" jdbcType="VARCHAR" />
		<result column="OPERATOR_BEFORE_SECTION" property="operatorBeforeSection" jdbcType="VARCHAR" />
		<result column="OPERATOR_AFTER_SECTION" property="operatorAfterSection" jdbcType="VARCHAR" />
		<result column="APPLY_OPERATOR" property="applyOperator" jdbcType="VARCHAR" />
		
	
	</resultMap>
	<select id="abatorgenerated_selectByPrimaryKey" resultMap="acceptConsultRollbackMap" parameterClass="com.creditease.rc.domain.AcceptConsultRollback">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		select ACCEPT_CONSULT_ROLLBACK_ID, CONSULT_POOL_ID, ROLLBACK_REASON, OPERATOR, OPERATE_DATE,
		HISTORY_FLAG,OPERATOR_ID,OPERATOR_BEFORE_STATE,OPERATOR_AFTER_STATE,OPERATOR_BEFORE_SECTION,OPERATOR_AFTER_SECTION
		,APPLY_OPERATOR
		from RL_ACCEPT_CONSULT_ROLLBACK
		where ACCEPT_CONSULT_ROLLBACK_ID = #acceptConsultRollbackId:DECIMAL#
	</select>

	<!-- 根据咨询池id查询有效的退回对象信息 -->
	<select id="selectByForeignKey" resultMap="acceptConsultRollbackMap" parameterClass="com.creditease.rc.domain.AcceptConsultRollback">
	select ACCEPT_CONSULT_ROLLBACK_ID, CONSULT_POOL_ID, ROLLBACK_REASON, OPERATOR, OPERATE_DATE,
	HISTORY_FLAG,OPERATOR_ID,OPERATOR_BEFORE_STATE,OPERATOR_AFTER_STATE,OPERATOR_BEFORE_SECTION,
	OPERATOR_AFTER_SECTION,APPLY_OPERATOR
	from RL_ACCEPT_CONSULT_ROLLBACK
	where CONSULT_POOL_ID = #consultPoolId:DECIMAL# and HISTORY_FLAG=#historyFlag:VARCHAR# 
  </select>

	<delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.creditease.rc.domain.AcceptConsultRollback">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		delete from RL_ACCEPT_CONSULT_ROLLBACK
		where ACCEPT_CONSULT_ROLLBACK_ID = #acceptConsultRollbackId:DECIMAL#
	</delete>

	<insert id="abatorgenerated_insert" parameterClass="com.creditease.rc.domain.AcceptConsultRollback">
		<selectKey resultClass="java.lang.Long" keyProperty="acceptConsultRollbackId">
			select SEQ_BASIC_INFO.NEXTVAL from dual
    </selectKey>
		insert into RL_ACCEPT_CONSULT_ROLLBACK (ACCEPT_CONSULT_ROLLBACK_ID,CONSULT_POOL_ID, ROLLBACK_REASON, OPERATOR,
		OPERATE_DATE, HISTORY_FLAG,OPERATOR_ID,OPERATOR_BEFORE_STATE,OPERATOR_AFTER_STATE,OPERATOR_BEFORE_SECTION,OPERATOR_AFTER_SECTION
		,APPLY_OPERATOR)
		values (#acceptConsultRollbackId#,#consultPoolId:DECIMAL#, #rollbackReason:VARCHAR#, #operator:VARCHAR#,
		#operateDate:TIMESTAMP#, #historyFlag:VARCHAR#,#operatorId:DECIMAL#,#operatorBeforeState:VARCHAR#,#operatorAfterState:VARCHAR#,
		#operatorBeforeSection:VARCHAR#,#operatorAfterSection:VARCHAR#,#applyOperator:VARCHAR#)
	</insert>
	<update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.creditease.rc.domain.AcceptConsultRollback">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
		update RL_ACCEPT_CONSULT_ROLLBACK
		set CONSULT_POOL_ID = #consultPoolId:DECIMAL#,
		ROLLBACK_REASON = #rollbackReason:VARCHAR#,
		OPERATOR = #operator:VARCHAR#,
		OPERATE_DATE = #operateDate:TIMESTAMP#,
		HISTORY_FLAG = #historyFlag:VARCHAR#,
		OPERATOR_ID=#operatorId:DECIMAL#,
		OPERATOR_BEFORE_STATE=#operatorBeforeState:VARCHAR#,
		OPERATOR_AFTER_STATE=#operatorAfterState:VARCHAR#,
		OPERATOR_BEFORE_SECTION=#operatorBeforeSection:VARCHAR#,
		OPERATOR_AFTER_SECTION=#operatorAfterSection:VARCHAR#
		APPLY_OPERATOR=#applyOperator:VARCHAR#
		where ACCEPT_CONSULT_ROLLBACK_ID = #acceptConsultRollbackId:DECIMAL#
	</update>

	<!-- 更新退回原因对象信息为历史 -->
	<update id="updateAcceptConsultForHis" parameterClass="com.creditease.rc.domain.AcceptConsultRollback">
		update RL_ACCEPT_CONSULT_ROLLBACK
		set HISTORY_FLAG = 1
		where CONSULT_POOL_ID = #consultPoolId:DECIMAL#
  </update>

	<update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.creditease.rc.domain.AcceptConsultRollback">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, do not modify. -->
	update RL_ACCEPT_CONSULT_ROLLBACK
		<dynamic prepend="set">
			<isNotNull prepend="," property="consultPoolId">
				CONSULT_POOL_ID = #consultPoolId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="rollbackReason">
				ROLLBACK_REASON = #rollbackReason:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="operator">
				OPERATOR = #operator:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="operateDate">
				OPERATE_DATE = #operateDate:TIMESTAMP#
      </isNotNull>
			<isNotNull prepend="," property="historyFlag">
				HISTORY_FLAG = #historyFlag:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="operatorId">
				OPERATOR_ID = #operatorId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="operatorBeforeState">
				OPERATOR_BEFORE_STATE = #operatorBeforeState:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="operatorAfterState">
				OPERATOR_AFTER_STATE = #operatorAfterState:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="operatorBeforeSection">
				OPERATOR_BEFORE_SECTION = #operatorBeforeSection:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="operatorAfterSection">
				OPERATOR_AFTER_SECTION = #operatorAfterSection:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="applyOperator">
				APPLY_OPERATOR = #applyOperator#
      </isNotNull>
		</dynamic>
		where ACCEPT_CONSULT_ROLLBACK_ID = #acceptConsultRollbackId:DECIMAL#
	</update>
</sqlMap>