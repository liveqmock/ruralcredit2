<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RL_LENDING_CONFIGURATION" >
  <resultMap id="abatorgenerated_LendingConfigurationResult" class="com.creditease.rc.domain.LendingConfiguration" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
    -->
    <result column="LENDING_CONFIGURATION_ID" property="lendingConfigurationId" jdbcType="DECIMAL" />
    <result column="AREA_DEPARTMENT_ID" property="areaDepartmentId" jdbcType="DECIMAL" />
    <result column="AREA_DEPARTMENT_NAME" property="areaDepartmentName" jdbcType="VARCHAR" />
    <result column="TRUST_LENDING" property="trustLending" jdbcType="CHAR" />
    <result column="DEBENTURE_TRANSFER" property="debentureTransfer" jdbcType="CHAR" />
  </resultMap>
  <sql id="lendingConfigurationInfo">
  	select rlc.lending_configuration_id as lendingConfigurationId,
  			rlc.area_department_id as areaDepartmentId,
			rlc.area_department_name as areaDepartmentName,
			decode( rlc.trust_lending,'1','否','0','是') as trustLending,
			decode(rlc.debenture_transfer,'1','否','0','是') as debentureTransfer
 		from rl_lending_configuration rlc
 		<dynamic prepend="where">
 			<isNotEmpty prepend="and" property="lendingConfiguration.areaDepartmentId">
 				AREA_DEPARTMENT_ID = #lendingConfiguration.areaDepartmentId#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="lendingConfiguration.areaDepartmentName">
				AREA_DEPARTMENT_NAME = #lendingConfiguration.areaDepartmentName#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="lendingConfiguration.trustLending">
				TRUST_LENDING = #lendingConfiguration.trustLending#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="lendingConfiguration.debentureTransfer">
				DEBENTURE_TRANSFER = #lendingConfiguration.debentureTransfer#
			</isNotEmpty>
 		</dynamic>
  </sql>
  <!-- 查询是否存在 -->
  <select id="selectIsExist" parameterClass="com.creditease.rc.domain.LendingConfiguration" resultClass="int">
  	select count(*) from rl_lending_configuration t where t.area_department_id=#areaDepartmentId#
  </select>
  <!-- 查询配置 信息-->
  <select  id="selectAll" resultClass="com.creditease.rc.domain.LendingConfiguration" parameterClass="java.util.HashMap">
  	<include refid="lendingConfigurationInfo" />
  </select>
  
  <select id="selectCount" resultClass="int" parameterClass="java.util.HashMap">
  		select count(*) from (<include refid="lendingConfigurationInfo" />)
  </select>
  
  <insert id="abatorgenerated_insert" parameterClass="com.creditease.rc.domain.LendingConfiguration" >
    <selectKey resultClass="java.lang.Long" keyProperty="lendingConfigurationId" >
      select SEQ_BASIC_INFO.NEXTVAL  from dual
    </selectKey>
    insert into RL_LENDING_CONFIGURATION (LENDING_CONFIGURATION_ID,AREA_DEPARTMENT_ID, AREA_DEPARTMENT_NAME, TRUST_LENDING,
      DEBENTURE_TRANSFER)
    values (#lendingConfigurationId:DECIMAL#,#areaDepartmentId:DECIMAL#, #areaDepartmentName:VARCHAR#, #trustLending:CHAR#,
      #debentureTransfer:CHAR#)
  </insert>
  <!-- 根据id删除一条信息 -->
  <delete id="removeLendingConfiguration" parameterClass="long">
  	delete from rl_lending_configuration rlc where rlc.lending_configuration_id=#lendingConfigurationId#
  </delete>
  
  <!-- 根据部门id更新一条信息 -->
  <update id="updateLendingConfiguration" parameterClass="com.creditease.rc.domain.LendingConfiguration" >
  	update rl_lending_configuration rlc
		<dynamic prepend="set">
			<isNotNull prepend="," property="lendingConfigurationId">
				LENDING_CONFIGURATION_ID = #lendingConfigurationId:DECIMAL#
      		</isNotNull>
			<isNotNull prepend="," property="areaDepartmentId">
				AREA_DEPARTMENT_ID = #areaDepartmentId:DECIMAL#
      		</isNotNull>
			<isNotNull prepend="," property="areaDepartmentName">
				AREA_DEPARTMENT_NAME = #areaDepartmentName:VARCHAR#
      		</isNotNull>
			<isNotNull prepend="," property="trustLending">
				TRUST_LENDING = #trustLending:CHAR#
      		</isNotNull>
			<isNotNull prepend="," property="debentureTransfer">
				DEBENTURE_TRANSFER = #debentureTransfer:CHAR#
      		</isNotNull>
		</dynamic>
	where rlc.AREA_DEPARTMENT_ID=#areaDepartmentId:DECIMAL#
  </update>
  
   <!-- 根据id更新一条信息 -->
  <update id="updateLendingConfigurationByareaDepartmentId" parameterClass="com.creditease.rc.domain.LendingConfiguration" >
  	update rl_lending_configuration rlc
		<dynamic prepend="set">
			<isNotNull prepend="," property="lendingConfigurationId">
				LENDING_CONFIGURATION_ID = #lendingConfigurationId:DECIMAL#
      		</isNotNull>
			<isNotNull prepend="," property="areaDepartmentId">
				AREA_DEPARTMENT_ID = #areaDepartmentId:DECIMAL#
      		</isNotNull>
			<isNotNull prepend="," property="areaDepartmentName">
				AREA_DEPARTMENT_NAME = #areaDepartmentName:VARCHAR#
      		</isNotNull>
			<isNotNull prepend="," property="trustLending">
				TRUST_LENDING = #trustLending:CHAR#
      		</isNotNull>
			<isNotNull prepend="," property="debentureTransfer">
				DEBENTURE_TRANSFER = #debentureTransfer:CHAR#
      		</isNotNull>
		</dynamic>
	where rlc.AREA_DEPARTMENT_ID=#areaDepartmentId#
  </update>
</sqlMap>